<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🎟️ 쿠폰 매니저 시스템 관리 V2</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🎟️</text></svg>">
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="assets/css/base.css">
    <link rel="stylesheet" href="assets/css/layout.css">
    <link rel="stylesheet" href="assets/css/navigation.css">
    <link rel="stylesheet" href="assets/css/components.css">
    <link rel="stylesheet" href="assets/css/tables.css">
    <link rel="stylesheet" href="assets/css/modals.css">
    <link rel="stylesheet" href="assets/css/animations.css">
    <link rel="stylesheet" href="assets/css/responsive.css">
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="header-content">
            <div class="logo">
                <span style="font-size: 1.5em;">🎟️</span>
                <h1>쿠폰 매니저 시스템 관리</h1>
            </div>
            
            <div class="nav-dropdown">
                <button class="nav-button" onclick="toggleDropdown()">
                    <span>📋 메뉴</span>
                </button>
                <div class="dropdown-content" id="navDropdown">
                    <a class="dropdown-item" onclick="showSection('corporate')">
                        <span class="icon">🏢</span>거래처 관리
                    </a>
                    <a class="dropdown-item" onclick="showSection('employee')">
                        <span class="icon">👤</span>직원 관리
                    </a>
                    <a class="dropdown-item" onclick="showSection('coupon')">
                        <span class="icon">🎟️</span>쿠폰 발행
                    </a>
                    <a class="dropdown-item" onclick="showSection('couponManagement')">
                        <span class="icon">📋</span>쿠폰 관리
                    </a>
                    <a class="dropdown-item" onclick="showSection('send')">
                        <span class="icon">📤</span>쿠폰 발송
                    </a>
                    <a class="dropdown-item" onclick="showSection('deliveryHistory')">
                        <span class="icon">📋</span>발송 기록
                    </a>
                    <a class="dropdown-item" id="emailConfigMenu" onclick="showSection('emailConfig')" style="display: none;">
                        <span class="icon">📧</span>이메일 설정
                    </a>
                    <a class="dropdown-item" id="smsConfigMenu" onclick="showSection('smsConfig')" style="display: none;">
                        <span class="icon">📱</span>SMS 설정
                    </a>
                    <a class="dropdown-item" onclick="showSection('systemSettings')">
                        <span class="icon">💰</span>가격 설정
                    </a>
                    <a class="dropdown-item" onclick="showSection('managementInfo')">
                        <span class="icon">📊</span>경영정보
                    </a>
                    <div class="dropdown-divider" style="border-top: 1px solid #e0e0e0; margin: 10px 0;"></div>
                    <a class="dropdown-item" onclick="showDeveloperLogin()" id="developerMenuButton" style="color: #dc3545;">
                        <span class="icon">👨‍💻</span>개발자 메뉴
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Server Status Card -->
        <div class="status-card">
            <div class="status-grid">
                <div>
                    <h3 style="margin-bottom: 15px;">🔧 서버 설정</h3>
                    <div class="form-row">
                        <div>
                            <label for="serverUrl">API 서버 주소</label>
                            <input type="url" id="serverUrl" value="http://localhost:8080" placeholder="http://localhost:8080">
                        </div>
                        <div style="display: flex; align-items: end;">
                            <button onclick="checkServerStatus()" class="btn">서버 상태 확인</button>
                        </div>
                    </div>
                    <div id="serverStatus"></div>
                </div>
                
                <div>
                    <h3 style="margin-bottom: 15px;">🔐 로그인</h3>
                    <div class="form-row">
                        <div>
                            <label for="userId">사용자 ID</label>
                            <input type="text" id="userId" value="admin" placeholder="사용자 ID를 입력하세요">
                        </div>
                        <div>
                            <label for="password">패스워드</label>
                            <input type="password" id="password" value="admin123" placeholder="패스워드를 입력하세요">
                        </div>
                    </div>
                    <button onclick="login()" class="btn btn-success">로그인</button>
                    <button onclick="clearToken()" class="btn btn-danger">토큰 삭제</button>
                    
                    <div id="loginResult"></div>
                    <div id="tokenDisplay" style="display: none; margin-top: 15px;">
                        <label style="margin-bottom: 10px;">액세스 토큰:</label>
                        <div style="background: #2d3748; color: #68d391; padding: 15px; border-radius: 8px; font-family: 'Courier New', monospace; word-break: break-all; font-size: 14px;" id="accessToken"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Content Area -->
        <div class="content-area">
            <!-- Welcome Section -->
            <div id="welcomeSection" class="content-section active">
                <div class="section-header">
                    <span class="icon">🎟️</span>
                    <h2>쿠폰 매니저 시스템에 오신 것을 환영합니다</h2>
                </div>
                <div style="text-align: center; padding: 60px 20px;">
                    <p style="font-size: 1.2em; color: #666; margin-bottom: 30px;">
                        상단의 메뉴를 사용하여 원하는 기능을 선택하세요.
                    </p>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; max-width: 800px; margin: 0 auto;">
                        <div class="card" style="text-align: center; cursor: pointer;" onclick="showSection('corporate')">
                            <h3>🏢 거래처 관리</h3>
                            <p>거래처 추가, 수정, 삭제</p>
                        </div>
                        <div class="card" style="text-align: center; cursor: pointer;" onclick="showSection('employee')">
                            <h3>👤 직원 관리</h3>
                            <p>직원 정보 관리</p>
                        </div>
                        <div class="card" style="text-align: center; cursor: pointer;" onclick="showSection('coupon')">
                            <h3>🎟️ 쿠폰 발행</h3>
                            <p>쿠폰 생성 및 발행</p>
                        </div>
                        <div class="card" style="text-align: center; cursor: pointer;" onclick="showSection('couponManagement')">
                            <h3>📋 쿠폰 관리</h3>
                            <p>발행된 쿠폰 조회, 수정, 삭제</p>
                        </div>
                        <div class="card" style="text-align: center; cursor: pointer;" onclick="showSection('systemSettings')">
                            <h3>💰 가격 설정</h3>
                            <p>시간대별 가격 설정</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Corporate Management Section -->
            <div id="corporateSection" class="content-section">
                <div class="section-header">
                    <span class="icon">🏢</span>
                    <h2>거래처 관리</h2>
                </div>
                <div style="margin-bottom: 20px;">
                    <button class="btn btn-success" onclick="showCreateCorporateForm()">+ 새 거래처 추가</button>
                </div>
                <div class="card">
                    <h3>🔍 검색</h3>
                    <div class="form-row">
                        <div>
                            <input type="text" id="searchInput" placeholder="회사명으로 검색...">
                        </div>
                        <div>
                            <button onclick="searchCorporates()" class="btn">검색</button>
                            <button onclick="loadAllCorporates()" class="btn btn-success">전체 목록</button>
                        </div>
                    </div>
                </div>
                <div id="corporateList">
                    <p style="text-align: center; color: #666; padding: 40px;">로그인 후 '전체 목록' 버튼을 클릭하여 거래처 목록을 불러오세요.</p>
                </div>
            </div>

            <!-- System Settings Section -->
            <div id="systemSettingsSection" class="content-section">
                <div class="section-header">
                    <span class="icon">💰</span>
                    <h2>가격 설정</h2>
                </div>
                
                <!-- 기본 가격 설정 (항상 표시되는 기본 설정) -->
                <div class="card">
                    <h3>🕒 기본 가격 설정</h3>
                    <div class="setting-item">
                        <div class="form-row">
                            <div>
                                <label>기본 현금 차감 (원)</label>
                                <input type="number" id="defaultCashDeduction" value="1000" min="0">
                            </div>
                            <div>
                                <label>포인트 차감 방식</label>
                                <select id="pointDeductionMethod" onchange="showPointMethodWarning()">
                                    <option value="후순위" selected>포인트 후순위 차감</option>
                                    <option value="비례">포인트 비례 차감</option>
                                </select>
                            </div>
                        </div>
                        <small style="color: #666;" id="defaultSettingsDescription">
                            시간대별 차감이 비활성화된 경우 이 값들이 사용됩니다
                        </small>
                        <div style="margin-top: 10px; padding: 10px; background: #f8f9fa; border-radius: 4px; font-size: 12px; color: #495057;">
                            <strong>💡 포인트 차감 방식 설명:</strong><br>
                            • <strong>후순위 차감:</strong> 현금 먼저 차감 후 부족분을 포인트로 차감<br>
                            • <strong>비례 차감:</strong> 현금과 포인트를 일정 비율로 동시 차감
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>⏰ 시간대별 차감 설정</h3>
                    
                    <div class="setting-item">
                        <div class="checkbox-group">
                            <input type="checkbox" id="enableTimeBasedDeduction" onchange="toggleTimeBasedControls()">
                            <label for="enableTimeBasedDeduction" style="margin: 0; font-weight: bold;">시간대별 차감 기능 활성화</label>
                        </div>
                        <small style="color: #666;">체크하면 시간대에 따라 다른 금액이 차감됩니다</small>
                    </div>

                    <!-- 시간대별 가격 설정 컨트롤들 -->
                    <div id="timeBasedControls" style="opacity: 0.5; pointer-events: none;">
                    <div class="setting-item">
                        <h4>🌅 아침 설정</h4>
                        <div class="form-row">
                            <div>
                                <label>시작 시간</label>
                                <input type="time" id="breakfastStartTime" value="06:00">
                            </div>
                            <div>
                                <label>종료 시간</label>
                                <input type="time" id="breakfastEndTime" value="10:59">
                            </div>
                            <div>
                                <label>현금 차감 (원)</label>
                                <input type="number" id="breakfastCashDeduction" value="3000" min="0">
                            </div>
                        </div>
                    </div>

                    <div class="setting-item">
                        <h4>🌞 점심 설정</h4>
                        <div class="form-row">
                            <div>
                                <label>시작 시간</label>
                                <input type="time" id="lunchStartTime" value="11:00">
                            </div>
                            <div>
                                <label>종료 시간</label>
                                <input type="time" id="lunchEndTime" value="14:59">
                            </div>
                            <div>
                                <label>현금 차감 (원)</label>
                                <input type="number" id="lunchCashDeduction" value="5000" min="0">
                            </div>
                        </div>
                    </div>

                    <div class="setting-item">
                        <h4>🌙 저녁 설정</h4>
                        <div class="form-row">
                            <div>
                                <label>시작 시간</label>
                                <input type="time" id="dinnerStartTime" value="15:00">
                            </div>
                            <div>
                                <label>종료 시간</label>
                                <input type="time" id="dinnerEndTime" value="21:59">
                            </div>
                            <div>
                                <label>현금 차감 (원)</label>
                                <input type="number" id="dinnerCashDeduction" value="7000" min="0">
                            </div>
                        </div>
                    </div>

                    </div> <!-- timeBasedControls 컨테이너 종료 -->
                </div>

                <div class="card">
                    <h3>🔧 기타 설정</h3>
                    <div class="setting-item">
                        <div class="checkbox-group">
                            <input type="checkbox" id="allowNegativeBalance">
                            <label for="allowNegativeBalance" style="margin: 0; font-weight: bold;">마이너스 잔고 허용</label>
                        </div>
                        <small style="color: #666;">체크하면 잔고가 부족해도 QR 스캔을 허용합니다</small>
                    </div>

                    <div class="setting-item" style="margin-top: 20px;">
                        <label for="parkingRegistrationUrl">🚗 주차등록 URL</label>
                        <input type="url" id="parkingRegistrationUrl" placeholder="https://example.com/parking" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                        <small style="color: #666;">안드로이드 앱의 주차등록 버튼 클릭 시 열릴 URL을 입력하세요</small>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 30px;">
                    <button onclick="loadSystemSettings()" class="btn btn-secondary">🔄 설정 불러오기</button>
                    <button onclick="saveSystemSettings()" class="btn btn-success">💾 설정 저장</button>
                    <button onclick="testCurrentDeduction()" class="btn" style="background: #17a2b8; color: white; margin-left: 10px;">🧮 현재 차감액 테스트</button>
                </div>

                <div id="settingsPreview" style="background: #e6f3ff; padding: 15px; border-radius: 8px; margin-top: 20px; display: none;">
                    <h4 style="margin: 0 0 10px 0; color: #1976d2;">📋 현재 설정 미리보기</h4>
                    <div id="previewContent"></div>
                </div>
            </div>

            <!-- Employee Management Section -->
            <div id="employeeSection" class="content-section">
                <div class="section-header">
                    <span class="icon">👤</span>
                    <h2>직원 관리</h2>
                </div>
                
                <div class="card">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h3>직원 관리</h3>
                        <div style="display: flex; gap: 10px;">
                            <select id="corporateSelectForEmployee" style="min-width: 200px; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                                <option value="">거래처를 선택하세요</option>
                            </select>
                            <button class="btn btn-success" onclick="showCreateEmployeeForm()" id="addEmployeeBtn" disabled>+ 새 직원 추가</button>
                            <button class="btn btn-success" onclick="showBulkImportForm()" id="bulkImportBtn" disabled style="background: #38a169;">📊 Excel 붙여넣기</button>
                        </div>
                    </div>

                    <!-- 직원 목록 -->
                    <div id="employeeList" style="margin-top: 20px;">
                        <p style="text-align: center; color: #666;">거래처를 선택하면 직원 목록이 표시됩니다.</p>
                    </div>
                </div>
            </div>

            <div id="couponSection" class="content-section">
                <div class="section-header">
                    <span class="icon">🎟️</span>
                    <h2>쿠폰 발행</h2>
                </div>
                
                <div class="card">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h3>💰 쿠폰 발행</h3>
                    </div>

                    <!-- 거래처 선택 -->
                    <div class="form-group" style="margin-bottom: 30px;">
                        <label for="couponCorporateSelect">발행할 거래처 선택:</label>
                        <select id="couponCorporateSelect" style="width: 100%; max-width: 400px; padding: 16px; border: 1px solid #ddd; border-radius: 4px;" onchange="loadEmployeesForCoupon()">
                            <option value="">거래처를 선택하세요</option>
                        </select>
                    </div>

                    <!-- 발행 설정 -->
                    <div id="couponSettingsPanel" style="display: none;">
                        <div class="card" style="background: #f8f9fa; margin-bottom: 20px;">
                            <h4 style="margin: 0 0 20px 0; color: #667eea;">💳 발행 설정</h4>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                                <!-- 총 현금 충전 금액 -->
                                <div class="form-group">
                                    <label for="totalCashAmount">총 현금 충전 금액:</label>
                                    <input type="text" id="totalCashAmount" placeholder="0" onchange="calculateDistribution()" oninput="formatCurrencyInput(this)" style="padding: 16px; width: 100%; border: 1px solid #ddd; border-radius: 4px;">
                                    <small style="color: #666;">직원들에게 균등 분배됩니다</small>
                                </div>

                                <!-- 포인트 설정 -->
                                <div class="form-group">
                                    <label>포인트 설정:</label>
                                    <div style="margin-bottom: 10px;">
                                        <label style="display: inline-flex; align-items: center; margin-right: 15px; font-weight: normal;">
                                            <input type="radio" name="pointType" value="percentage" onchange="togglePointInput()" checked>
                                            <span style="margin-left: 5px;">정률 (%)</span>
                                        </label>
                                        <label style="display: inline-flex; align-items: center; margin-right: 15px; font-weight: normal;">
                                            <input type="radio" name="pointType" value="fixed" onchange="togglePointInput()">
                                            <span style="margin-left: 5px;">정액 (쿠폰당)</span>
                                        </label>
                                        <label style="display: inline-flex; align-items: center; font-weight: normal;">
                                            <input type="radio" name="pointType" value="total" onchange="togglePointInput()">
                                            <span style="margin-left: 5px;">총 포인트 (균등배분)</span>
                                        </label>
                                    </div>
                                    <input type="text" id="pointValue" placeholder="10" onchange="calculateDistribution()" oninput="formatPointInput(this)" style="padding: 16px; width: 100%; border: 1px solid #ddd; border-radius: 4px;">
                                    <small id="pointDescription" style="color: #666;">현금 충전액의 % 만큼 포인트 지급</small>
                                </div>
                            </div>

                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                                <!-- 만료일 설정 -->
                                <div class="form-group">
                                    <label for="expireDate">쿠폰 만료일:</label>
                                    <div style="display: flex; gap: 8px; align-items: center; margin-bottom: 10px; flex-wrap: wrap;">
                                        <button type="button" onclick="setExpireDate(1)" class="btn" style="padding: 8px 12px; font-size: 12px; background: #4299e1; color: white;">1개월</button>
                                        <button type="button" onclick="setExpireDate(3)" class="btn" style="padding: 8px 12px; font-size: 12px; background: #48bb78; color: white;">3개월</button>
                                        <button type="button" onclick="setExpireDate(6)" class="btn" style="padding: 8px 12px; font-size: 12px; background: #ed8936; color: white;">6개월</button>
                                        <span style="color: #666; font-size: 12px; margin-left: 5px;">또는 직접 선택:</span>
                                    </div>
                                    <input type="date" id="expireDate" style="padding: 16px; width: 100%; border: 1px solid #ddd; border-radius: 4px;">
                                </div>

                                <!-- 사용 가능 요일 -->
                                <div class="form-group">
                                    <label>사용 가능 요일:</label>
                                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                                        <label style="font-weight: normal;"><input type="checkbox" value="sun" class="available-day"> 일</label>
                                        <label style="font-weight: normal;"><input type="checkbox" value="mon" class="available-day" checked> 월</label>
                                        <label style="font-weight: normal;"><input type="checkbox" value="tue" class="available-day" checked> 화</label>
                                        <label style="font-weight: normal;"><input type="checkbox" value="wed" class="available-day" checked> 수</label>
                                        <label style="font-weight: normal;"><input type="checkbox" value="thu" class="available-day" checked> 목</label>
                                        <label style="font-weight: normal;"><input type="checkbox" value="fri" class="available-day" checked> 금</label>
                                        <label style="font-weight: normal;"><input type="checkbox" value="sat" class="available-day"> 토</label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 직원 목록 및 배분 현황 -->
                        <div id="employeeDistributionPanel" style="display: none;">
                            <h4 style="margin: 0 0 15px 0; color: #667eea;">👥 직원별 쿠폰 배분 현황</h4>
                            
                            <!-- 요약 정보 -->
                            <div id="distributionSummary" class="card" style="background: #e6f3ff; border-left: 4px solid #4299e1; margin-bottom: 20px;">
                            </div>

                            <!-- 직원 목록 테이블 -->
                            <div style="max-height: 400px; overflow-y: auto; border: 1px solid #e0e0e0; border-radius: 8px;">
                                <table id="employeeDistributionTable" style="width: 100%; border-collapse: collapse;">
                                    <thead style="background: #f8f9fa; position: sticky; top: 0;">
                                        <tr>
                                            <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: left;">이름</th>
                                            <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: left;">전화번호</th>
                                            <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: left;">이메일</th>
                                            <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: center;">현금충전금액</th>
                                            <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: center;">포인트충전금액</th>
                                        </tr>
                                    </thead>
                                    <tbody id="employeeDistributionBody">
                                    </tbody>
                                </table>
                            </div>

                            <!-- 발행 버튼 -->
                            <div style="text-align: center; margin-top: 30px;">
                                <button onclick="issueCoupons()" class="btn btn-success" id="issueCouponsBtn" disabled style="padding: 15px 40px; font-size: 16px; font-weight: bold;">
                                    🎫 쿠폰 일괄 발행
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 쿠폰 발행 안내 -->
                    <div id="couponInstructions" class="card" style="background: #f0f8ff; border-left: 4px solid #4299e1;">
                        <h4 style="margin: 0 0 15px 0; color: #2c5aa0;">📋 쿠폰 발행 방법</h4>
                        <ol style="margin: 0; padding-left: 20px; color: #2c5aa0;">
                            <li style="margin: 8px 0;">발행할 거래처를 선택하세요</li>
                            <li style="margin: 8px 0;">총 현금 충전 금액을 입력하세요 (직원들에게 균등 분배)</li>
                            <li style="margin: 8px 0;">포인트 설정을 선택하세요 (정률 % 또는 정액 포인트)</li>
                            <li style="margin: 8px 0;">만료일과 사용가능 요일을 설정하세요</li>
                            <li style="margin: 8px 0;">배분 현황을 확인 후 일괄 발행하세요</li>
                        </ol>
                    </div>
                </div>
            </div>

            <!-- Coupon Management Section -->
            <div id="couponManagementSection" class="content-section">
                <div class="section-header">
                    <span class="icon">📋</span>
                    <h2>쿠폰 관리</h2>
                </div>
                
                <!-- 검색 및 필터 -->
                <div class="card">
                    <h3>🔍 쿠폰 검색 및 필터</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
                        <div>
                            <label for="couponSearchCorporate">거래처:</label>
                            <select id="couponSearchCorporate" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;" onchange="searchCoupons()">
                                <option value="">전체 거래처</option>
                            </select>
                        </div>
                        <div>
                            <label for="couponSearchStatus">상태:</label>
                            <select id="couponSearchStatus" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;" onchange="searchCoupons()">
                                <option value="">전체 상태</option>
                                <option value="ACTIVE">사용 가능</option>
                                <option value="USED">사용됨</option>
                                <option value="EXPIRED">만료됨</option>
                                <option value="SUSPENDED">일시 중지</option>
                                <option value="TERMINATED">해지됨</option>
                            </select>
                        </div>
                        <div>
                            <label for="couponSearchCode">쿠폰 코드:</label>
                            <input type="text" id="couponSearchCode" placeholder="쿠폰 코드 검색..." style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;" onchange="searchCoupons()">
                        </div>
                        <div>
                            <label for="couponSearchEmployee">직원명/전화번호:</label>
                            <input type="text" id="couponSearchEmployee" placeholder="직원명 또는 전화번호" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;" onchange="searchCoupons()">
                        </div>
                    </div>
                    <div style="text-align: center;">
                        <button onclick="searchCoupons()" class="btn">🔍 검색</button>
                        <button onclick="loadAllCoupons()" class="btn btn-success">📋 전체 목록</button>
                        <button onclick="refreshCouponList()" class="btn" style="background: #4299e1; color: white;">🔄 새로고침</button>
                    </div>
                </div>

                <!-- 통계 요약 -->
                <div id="couponStats" class="card" style="margin-bottom: 20px;">
                    <h3>📊 쿠폰 통계</h3>
                    <div id="couponStatsContent" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                        <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                            <div style="font-size: 2em; font-weight: bold; color: #667eea;" id="totalCoupons">0</div>
                            <div style="color: #666; font-size: 14px;">총 쿠폰</div>
                        </div>
                        <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                            <div style="font-size: 2em; font-weight: bold; color: #48bb78;" id="activeCoupons">0</div>
                            <div style="color: #666; font-size: 14px;">사용 가능</div>
                        </div>
                        <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                            <div style="font-size: 2em; font-weight: bold; color: #ed8936;" id="usedCoupons">0</div>
                            <div style="color: #666; font-size: 14px;">사용됨</div>
                        </div>
                        <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                            <div style="font-size: 2em; font-weight: bold; color: #e53e3e;" id="expiredCoupons">0</div>
                            <div style="color: #666; font-size: 14px;">만료됨</div>
                        </div>
                    </div>
                </div>

                <!-- 쿠폰 목록 -->
                <div class="card">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h3>📋 쿠폰 목록</h3>
                        <div id="couponListActions" style="display: flex; gap: 10px;">
                            <button onclick="exportCouponData()" class="btn" style="background: #38a169; color: white;">📊 데이터 내보내기</button>
                            <button onclick="bulkStatusUpdate()" class="btn" style="background: #ed8936; color: white;">🔄 일괄 상태변경</button>
                            <button onclick="bulkDeleteCoupons()" class="btn" style="background: #e53e3e; color: white;">🗑️ 일괄 삭제</button>
                        </div>
                    </div>

                    <div id="couponListContainer" style="max-height: 600px; overflow-y: auto; border: 1px solid #e0e0e0; border-radius: 8px;">
                        <table id="couponListTable" style="width: 100%; border-collapse: collapse;">
                            <thead style="background: #f8f9fa; position: sticky; top: 0;">
                                <tr>
                                    <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: left; width: 40px;">
                                        <input type="checkbox" id="selectAllCoupons" onchange="toggleSelectAllCoupons()">
                                    </th>
                                    <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: left; width: 180px;">쿠폰 코드</th>
                                    <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: left; width: 120px;">거래처</th>
                                    <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: left; width: 100px;">직원명</th>
                                    <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: left; width: 120px;">전화번호</th>
                                    <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: right; width: 100px;">현금잔고</th>
                                    <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: right; width: 100px;">포인트잔고</th>
                                    <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: center; width: 80px;">상태</th>
                                    <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: center; width: 100px;">만료일</th>
                                    <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: center; width: 120px;">생성일</th>
                                    <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: center; width: 180px;">액션</th>
                                </tr>
                            </thead>
                            <tbody id="couponListBody">
                                <tr>
                                    <td colspan="11" style="text-align: center; padding: 40px; color: #666;">
                                        로그인 후 '전체 목록' 버튼을 클릭하여 쿠폰 목록을 불러오세요.
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- 쿠폰 관리 안내 -->
                <div class="card" style="background: #f0f8ff; border-left: 4px solid #4299e1; margin-top: 20px;">
                    <h4 style="margin: 0 0 15px 0; color: #2c5aa0;">📋 쿠폰 관리 기능</h4>
                    <ul style="margin: 0; padding-left: 20px; color: #2c5aa0;">
                        <li style="margin: 8px 0;"><strong>조회:</strong> 거래처, 상태, 쿠폰코드, 직원정보로 검색 가능</li>
                        <li style="margin: 8px 0;"><strong>수정:</strong> 개별 쿠폰의 잔액, 상태, 만료일 수정 가능</li>
                        <li style="margin: 8px 0;"><strong>삭제:</strong> 필요시 쿠폰을 완전 삭제 (주의 필요)</li>
                        <li style="margin: 8px 0;"><strong>일괄 작업:</strong> 여러 쿠폰을 선택하여 상태 일괄 변경</li>
                        <li style="margin: 8px 0;"><strong>데이터 내보내기:</strong> Excel 호환 형식으로 데이터 다운로드</li>
                    </ul>
                </div>
            </div>

            <div id="sendSection" class="content-section">
                <div class="section-header">
                    <span class="icon">📤</span>
                    <h2>쿠폰 발송</h2>
                </div>
                
                <!-- 거래처 선택 -->
                <div class="form-group" style="margin-bottom: 30px;">
                    <label for="sendCorporateSelect">발송할 거래처 선택:</label>
                    <select id="sendCorporateSelect" style="width: 100%; max-width: 400px; padding: 16px;" onchange="loadCouponsForSend()">
                        <option value="">거래처를 선택하세요</option>
                    </select>
                </div>

                <!-- 쿠폰 목록 및 발송 현황 -->
                <div id="couponSendPanel" style="display: none;">
                    <h4 style="margin: 0 0 15px 0; color: #667eea;">🎫 쿠폰 발송 현황</h4>
                    
                    <!-- 발송 요약 정보 -->
                    <div id="sendSummary" style="background: #e6f3ff; padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #4299e1;">
                    </div>

                    <!-- 일괄 발송 버튼 -->
                    <div style="margin-bottom: 20px; display: flex; gap: 10px; align-items: center;">
                        <button onclick="sendAllEmails()" class="success-button" style="background: #e53e3e;">📧 전체 이메일 발송</button>
                        <button onclick="sendAllSMS()" class="success-button" style="background: #48bb78;">📱 전체 SMS 발송</button>
                        <button onclick="sendAllKakao()" class="success-button" style="background: #f6ad55;">💬 전체 카카오톡 발송</button>
                    </div>

                    <!-- 쿠폰 목록 테이블 -->
                    <div style="max-height: 500px; overflow-y: auto; border: 1px solid #e0e0e0; border-radius: 8px;">
                        <table id="couponSendTable" style="width: 100%; border-collapse: collapse;">
                            <thead style="background: #f8f9fa; position: sticky; top: 0;">
                                <tr>
                                    <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: left; width: 120px;">쿠폰번호</th>
                                    <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: left; width: 100px;">이름</th>
                                    <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: left; width: 120px;">전화번호</th>
                                    <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: left; width: 180px;">이메일주소</th>
                                    <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: center; width: 80px;">발송여부</th>
                                    <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: center; width: 250px;">발송 액션</th>
                                </tr>
                            </thead>
                            <tbody id="couponSendBody">
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- 쿠폰 발송 안내 -->
                <div id="sendInstructions" style="background: #f0f8ff; padding: 20px; border-radius: 8px; border-left: 4px solid #4299e1;">
                    <h4 style="margin: 0 0 15px 0; color: #2c5aa0;">📋 쿠폰 발송 방법</h4>
                    <ol style="margin: 0; padding-left: 20px; color: #2c5aa0;">
                        <li style="margin: 8px 0;">발송할 거래처를 선택하세요</li>
                        <li style="margin: 8px 0;">해당 거래처의 쿠폰 목록이 자동으로 로드됩니다</li>
                        <li style="margin: 8px 0;">개별 발송: 각 쿠폰별로 이메일/SMS/카카오톡 버튼 클릭</li>
                        <li style="margin: 8px 0;">일괄 발송: 상단의 전체 발송 버튼 클릭</li>
                        <li style="margin: 8px 0;">발송 상태는 실시간으로 업데이트됩니다</li>
                    </ol>
                    <div style="margin-top: 15px; padding: 10px; background: #d4edda; border-radius: 4px; border-left: 3px solid #28a745;">
                        <strong>✅ 상태:</strong> 쿠폰 발송 기능이 활성화되었습니다. 발송 시 데이터베이스에 기록됩니다.
                    </div>
                </div>
            </div>

            <div id="deliveryHistorySection" class="content-section">
                <div class="section-header">
                    <span class="icon">📋</span>
                    <h2>발송 기록</h2>
                </div>
                
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h3>📊 쿠폰 발송 기록</h3>
                    <button onclick="loadDeliveryHistory()" style="background: #667eea; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">🔄 새로고침</button>
                </div>

                <!-- 검색 및 필터 -->
                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr auto; gap: 10px; align-items: end;">
                        <div>
                            <label for="deliverySearchType">검색 유형:</label>
                            <select id="deliverySearchType" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                                <option value="">전체</option>
                                <option value="email">이메일</option>
                                <option value="sms">SMS</option>
                                <option value="kakao">카카오톡</option>
                            </select>
                        </div>
                        <div>
                            <label for="deliverySearchStatus">발송 상태:</label>
                            <select id="deliverySearchStatus" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                                <option value="">전체</option>
                                <option value="pending">대기</option>
                                <option value="sent">발송됨</option>
                                <option value="failed">실패</option>
                            </select>
                        </div>
                        <div>
                            <label for="deliverySearchDate">발송일:</label>
                            <input type="date" id="deliverySearchDate" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                        </div>
                        <button onclick="filterDeliveryHistory()" style="background: #48bb78; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">🔍 필터</button>
                    </div>
                </div>

                <!-- 통계 요약 -->
                <div id="deliveryStats" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 20px;">
                    <!-- 통계 카드들이 여기에 동적으로 생성됩니다 -->
                </div>

                <!-- 발송 기록 테이블 -->
                <div style="max-height: 600px; overflow-y: auto; border: 1px solid #e0e0e0; border-radius: 8px;">
                    <table id="deliveryHistoryTable" style="width: 100%; border-collapse: collapse;">
                        <thead style="background: #f8f9fa; position: sticky; top: 0;">
                            <tr>
                                <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: left; width: 80px;">ID</th>
                                <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: left; width: 120px;">쿠폰번호</th>
                                <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: left; width: 80px;">발송유형</th>
                                <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: left; width: 120px;">수신자</th>
                                <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: left; width: 180px;">제목</th>
                                <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: left; width: 80px;">상태</th>
                                <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: left; width: 150px;">발송일시</th>
                                <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: center; width: 80px;">액션</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- 발송 기록 데이터가 여기에 동적으로 생성됩니다 -->
                        </tbody>
                    </table>
                </div>

                <!-- 페이지네이션 -->
                <div id="deliveryPagination" style="margin-top: 20px; text-align: center;">
                    <!-- 페이지네이션 버튼들이 여기에 동적으로 생성됩니다 -->
                </div>
            </div>

            <div id="emailConfigSection" class="content-section">
                <div class="section-header">
                    <span class="icon">📧</span>
                    <h2>이메일 설정</h2>
                </div>
                
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h3>📧 이메일 서버 설정</h3>
                    <button onclick="testEmailConnection()" style="background: #38a169; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">연결 테스트</button>
                </div>

                <!-- 프로바이더 프리셋 -->
                <div class="card" style="margin-bottom: 20px;">
                    <h4 style="margin-top: 0; color: #667eea;">⚡ 빠른 설정 (프로바이더 프리셋)</h4>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <button onclick="applyGmailPreset()" class="btn" style="background: #ea4335; color: white;">Gmail</button>
                        <button onclick="applyOutlookPreset()" class="btn" style="background: #0078d4; color: white;">Outlook</button>
                        <button onclick="applyYahooPreset()" class="btn" style="background: #720e9e; color: white;">Yahoo</button>
                        <button onclick="applyNaverPreset()" class="btn" style="background: #03c75a; color: white;">Naver</button>
                        <button onclick="applyEcountPreset()" class="btn" style="background: #f39c12; color: white;">Ecount</button>
                    </div>
                </div>

                <!-- SMTP 서버 설정 -->
                <div class="card" style="margin-bottom: 20px;">
                    <h4 style="margin-top: 0; color: #667eea;">🔧 SMTP 서버 설정</h4>
                    
                    <div class="form-row">
                        <div>
                            <label for="smtpHost">SMTP 호스트 *</label>
                            <input type="text" id="smtpHost" placeholder="smtp.gmail.com">
                        </div>
                        <div>
                            <label for="smtpPort">SMTP 포트 *</label>
                            <input type="number" id="smtpPort" placeholder="587">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>보안 설정</label>
                        <div style="display: flex; gap: 20px; margin-top: 8px;">
                            <label style="display: flex; align-items: center; margin: 0;">
                                <input type="radio" name="security" value="none" style="margin-right: 5px;">
                                보안 없음
                            </label>
                            <label style="display: flex; align-items: center; margin: 0;">
                                <input type="radio" name="security" value="tls" checked style="margin-right: 5px;">
                                TLS
                            </label>
                            <label style="display: flex; align-items: center; margin: 0;">
                                <input type="radio" name="security" value="ssl" style="margin-right: 5px;">
                                SSL
                            </label>
                        </div>
                    </div>
                </div>

                <!-- 인증 정보 -->
                <div class="card" style="margin-bottom: 20px;">
                    <h4 style="margin-top: 0; color: #667eea;">🔐 인증 정보</h4>
                    
                    <div class="form-group">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <input type="checkbox" id="useAuth" checked>
                            <label for="useAuth" style="margin: 0;">SMTP 인증 사용</label>
                        </div>
                    </div>

                    <div class="form-row">
                        <div>
                            <label for="smtpUsername">사용자명/이메일 *</label>
                            <input type="email" id="smtpUsername" placeholder="your-email@gmail.com">
                        </div>
                        <div>
                            <label for="smtpPassword">비밀번호 *</label>
                            <input type="password" id="smtpPassword" placeholder="앱 비밀번호 사용 권장">
                        </div>
                    </div>
                </div>

                <!-- 발송자 정보 -->
                <div class="card" style="margin-bottom: 20px;">
                    <h4 style="margin-top: 0; color: #667eea;">👤 발송자 정보</h4>
                    
                    <div class="form-row">
                        <div>
                            <label for="senderName">발송자 이름</label>
                            <input type="text" id="senderName" placeholder="쿠폰관리시스템">
                        </div>
                        <div>
                            <label for="senderEmail">발송자 이메일</label>
                            <input type="email" id="senderEmail" placeholder="noreply@company.com">
                        </div>
                    </div>
                </div>

                <!-- 이메일 템플릿 설정 -->
                <div class="card" style="margin-bottom: 20px;">
                    <h4 style="margin-top: 0; color: #667eea;">📝 이메일 템플릿 설정</h4>
                    
                    <div class="form-group">
                        <label for="emailSubject">이메일 제목</label>
                        <input type="text" id="emailSubject" placeholder="[쿠폰 발송] {{이름}}님의 쿠폰이 발급되었습니다">
                    </div>

                    <div class="form-group">
                        <label for="emailTemplate">이메일 내용 템플릿</label>
                        <textarea id="emailTemplate" style="width: 100%; height: 200px; padding: 12px; border: 1px solid #e0e0e0; border-radius: 8px; font-family: inherit; resize: vertical;" 
                                placeholder="안녕하세요 {{이름}}님,&#10;&#10;{{회사명}}에서 쿠폰이 발급되었습니다.&#10;&#10;쿠폰 코드: {{쿠폰코드}}&#10;충전 금액: {{충전금액}}원&#10;포인트: {{포인트}}P&#10;유효기간: {{유효기간}}&#10;&#10;감사합니다."></textarea>
                        <small style="color: #666; display: block; margin-top: 5px;">
                            사용 가능한 변수: {{이름}}, {{회사명}}, {{쿠폰코드}}, {{충전금액}}, {{포인트}}, {{유효기간}}
                        </small>
                    </div>
                </div>

                <!-- 저장 버튼 -->
                <div style="text-align: center; margin-top: 30px;">
                    <button onclick="saveEmailConfig()" class="btn btn-success" style="padding: 15px 30px; font-size: 16px;">💾 설정 저장</button>
                </div>

                <!-- 도움말 -->
                <div style="background: #f0f8ff; padding: 20px; border-radius: 8px; border-left: 4px solid #4299e1; margin-top: 30px;">
                    <h4 style="margin: 0 0 15px 0; color: #2c5aa0;">💡 설정 도움말</h4>
                    <ul style="margin: 0; padding-left: 20px; color: #2c5aa0;">
                        <li style="margin: 8px 0;">Gmail 사용 시 2단계 인증 설정 후 앱 비밀번호를 사용하세요</li>
                        <li style="margin: 8px 0;">대부분의 SMTP 서버는 TLS 보안을 사용합니다 (포트 587)</li>
                        <li style="margin: 8px 0;">설정 완료 후 '연결 테스트' 버튼으로 동작을 확인하세요</li>
                        <li style="margin: 8px 0;">이메일 템플릿의 변수는 실제 발송 시 자동으로 치환됩니다</li>
                    </ul>
                </div>
            </div>

            <div id="smsConfigSection" class="content-section">
                <div class="section-header">
                    <span class="icon">📱</span>
                    <h2>SMS 설정</h2>
                </div>
                
                <div class="sms-config">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h3>📱 SMS/카카오톡 발송 설정</h3>
                        <button onclick="testSmsConnection()" style="background: #38a169; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">연결 테스트</button>
                    </div>

                    <!-- nusome.co.kr API 설정 폼 -->
                    <div class="form-container" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                            <!-- API 기본 설정 -->
                            <div>
                                <h4 style="margin: 0 0 15px 0; color: #667eea;">🔧 API 기본 설정</h4>
                                
                                <div class="form-group" style="margin-bottom: 15px;">
                                    <label>사업자등록번호:</label>
                                    <div style="padding: 12px; background: #f8f9fa; border: 1px solid #ddd; border-radius: 4px; color: #666;">
                                        <span id="displayBusinessNumber">관리자 기본설정에서 가져옵니다</span>
                                    </div>
                                    <small style="color: #666; font-size: 12px;">💡 '관리자 기본설정' → '사업자 정보설정'에서 설정한 번호를 자동으로 사용합니다</small>
                                </div>

                                <div class="form-group" style="margin-bottom: 15px;">
                                    <label for="smsApiUrl">API URL:</label>
                                    <input type="text" id="smsApiUrl" value="https://www.nusome.co.kr/api/request_qr_sms" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 4px;" readonly>
                                    <small style="color: #666; font-size: 12px;">nusome QR SMS API 엔드포인트</small>
                                </div>
                            </div>

                            <!-- 발송자 정보 -->
                            <div>
                                <h4 style="margin: 0 0 15px 0; color: #667eea;">👤 발송자 정보</h4>
                                
                                <div class="form-group" style="margin-bottom: 15px;">
                                    <label for="smsSenderNumber">발송자 번호:</label>
                                    <input type="text" id="smsSenderNumber" placeholder="01012345678 (하이픈 없이)" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 4px;">
                                </div>

                                <div class="form-group" style="margin-bottom: 15px;">
                                    <label for="smsSenderName">발송자 이름:</label>
                                    <input type="text" id="smsSenderName" placeholder="쿠폰관리시스템" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 4px;">
                                </div>

                                <div class="form-group" style="margin-bottom: 15px;">
                                    <label>
                                        <input type="checkbox" id="smsTestMode" style="margin-right: 8px;">
                                        테스트 모드 (실제 발송 안함)
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- 저장 버튼 -->
                        <div style="margin-top: 25px; text-align: center;">
                            <button onclick="saveSmsConfig()" style="background: #4299e1; color: white; border: none; padding: 12px 30px; border-radius: 6px; cursor: pointer; font-size: 16px; margin-right: 10px;">💾 설정 저장</button>
                            <button onclick="loadSmsConfig()" style="background: #718096; color: white; border: none; padding: 12px 30px; border-radius: 6px; cursor: pointer; font-size: 16px;">🔄 설정 불러오기</button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="managementInfoSection" class="content-section">
                <div class="section-header">
                    <span class="icon">📊</span>
                    <h2>경영정보</h2>
                </div>
                
                <!-- 탭 메뉴 -->
                <div class="management-tabs" style="margin-bottom: 20px; border-bottom: 2px solid #f0f0f0;">
                    <button class="tab-button active" onclick="showManagementTab('statistics')">📊 거래처별 통계</button>
                    <button class="tab-button" onclick="showManagementTab('monthlyReport')">📋 월간정산보고서</button>
                </div>
                
                <!-- 거래처별 통계 탭 -->
                <div id="statisticsTab" class="management-tab-content active">
                    <h3 style="margin-bottom: 20px;">📊 거래처별 쿠폰 발행 및 사용 통계</h3>
                
                <!-- 기간 선택 -->
                <div class="card" style="margin-bottom: 20px;">
                    <h4 style="margin-bottom: 15px;">📅 조회 기간 설정</h4>
                    <div class="form-row">
                        <div>
                            <label for="statsStartDate">시작일:</label>
                            <input type="date" id="statsStartDate">
                        </div>
                        <div>
                            <label for="statsEndDate">종료일:</label>
                            <input type="date" id="statsEndDate">
                        </div>
                    </div>
                    <div style="text-align: center; margin-top: 15px;">
                        <button onclick="loadManagementStats()" class="btn btn-success">🔍 통계 조회</button>
                        <button onclick="exportStatsToExcel()" class="btn" style="background: #52c41a; color: white;">📥 엑셀 다운로드</button>
                    </div>
                </div>
                
                <!-- 전체 요약 통계 -->
                <div class="card" style="margin-bottom: 20px;">
                    <h4 style="margin-bottom: 15px;">📈 전체 요약</h4>
                    <div id="summaryStats" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                        <div class="stat-item" style="background: #e6f7ff; padding: 15px; border-radius: 8px; text-align: center;">
                            <div style="font-size: 14px; color: #666;">총 거래처 수</div>
                            <div id="totalCorporates" style="font-size: 24px; font-weight: bold; color: #1890ff;">-</div>
                        </div>
                        <div class="stat-item" style="background: #f6ffed; padding: 15px; border-radius: 8px; text-align: center;">
                            <div style="font-size: 14px; color: #666;">발행된 쿠폰 수</div>
                            <div id="totalIssuedCoupons" style="font-size: 24px; font-weight: bold; color: #52c41a;">-</div>
                        </div>
                        <div class="stat-item" style="background: #fff7e6; padding: 15px; border-radius: 8px; text-align: center;">
                            <div style="font-size: 14px; color: #666;">사용된 쿠폰 수</div>
                            <div id="totalUsedCoupons" style="font-size: 24px; font-weight: bold; color: #fa8c16;">-</div>
                        </div>
                        <div class="stat-item" style="background: #fff1f0; padding: 15px; border-radius: 8px; text-align: center;">
                            <div style="font-size: 14px; color: #666;">전체 사용률</div>
                            <div id="totalUsageRate" style="font-size: 24px; font-weight: bold; color: #f5222d;">-</div>
                        </div>
                    </div>
                </div>
                
                <!-- 거래처별 상세 통계 테이블 -->
                <div class="card">
                    <h4 style="margin-bottom: 15px;">📋 거래처별 상세 통계</h4>
                    <div style="max-height: 500px; overflow-y: auto; border: 1px solid #e0e0e0; border-radius: 8px;">
                        <table id="corporateStatsTable" style="width: 100%; border-collapse: collapse;">
                            <thead style="background: #f8f9fa; position: sticky; top: 0;">
                                <tr>
                                    <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: left;">거래처명</th>
                                    <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: center;">직원 수</th>
                                    <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: center;">발행 쿠폰</th>
                                    <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: center;">사용 쿠폰</th>
                                    <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: center;">미사용 쿠폰</th>
                                    <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: center;">사용률</th>
                                    <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: center;">총 현금 가치</th>
                                    <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: center;">총 포인트 가치</th>
                                    <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: center;">상세보기</th>
                                </tr>
                            </thead>
                            <tbody id="corporateStatsBody">
                                <tr>
                                    <td colspan="9" style="text-align: center; padding: 20px; border: 1px solid #e0e0e0;">
                                        조회 버튼을 클릭하여 통계를 확인하세요.
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                </div>
                
                <!-- 월간정산보고서 탭 -->
                <div id="monthlyReportTab" class="management-tab-content">
                    <h3 style="margin-bottom: 20px;">📋 월간정산보고서</h3>
                    
                    <!-- 조회 조건 -->
                    <div class="card" style="margin-bottom: 20px;">
                        <h4 style="margin-bottom: 15px;">🔍 조회 조건</h4>
                        <div class="form-row">
                            <div>
                                <label for="monthlyReportYear">년도:</label>
                                <select id="monthlyReportYear">
                                    <option value="2025">2025년</option>
                                    <option value="2024">2024년</option>
                                    <option value="2023">2023년</option>
                                </select>
                            </div>
                            <div>
                                <label for="monthlyReportMonth">월:</label>
                                <select id="monthlyReportMonth">
                                    <option value="01">1월</option>
                                    <option value="02">2월</option>
                                    <option value="03">3월</option>
                                    <option value="04">4월</option>
                                    <option value="05">5월</option>
                                    <option value="06">6월</option>
                                    <option value="07">7월</option>
                                    <option value="08">8월</option>
                                    <option value="09">9월</option>
                                    <option value="10">10월</option>
                                    <option value="11">11월</option>
                                    <option value="12">12월</option>
                                </select>
                            </div>
                            <div>
                                <label for="monthlyReportCorporate">거래처:</label>
                                <select id="monthlyReportCorporate">
                                    <option value="">전체</option>
                                </select>
                            </div>
                        </div>
                        <div style="text-align: center; margin-top: 15px;">
                            <button onclick="loadMonthlyReport()" class="btn btn-success">📊 월간보고서 조회</button>
                            <button onclick="exportMonthlyReportToExcel()" class="btn" style="background: #52c41a; color: white;">📥 엑셀 다운로드</button>
                        </div>
                    </div>
                    
                    <!-- 월간 요약 정보 -->
                    <div class="card" style="margin-bottom: 20px;">
                        <h4 style="margin-bottom: 15px;">📈 월간 요약</h4>
                        <div id="monthlySummary" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px;">
                            <div class="stat-item" style="background: #e6f7ff; padding: 15px; border-radius: 8px; text-align: center;">
                                <div style="font-size: 14px; color: #666;">총 사용 횟수</div>
                                <div id="monthlyTotalUsage" style="font-size: 24px; font-weight: bold; color: #1890ff;">-</div>
                            </div>
                            <div class="stat-item" style="background: #f6ffed; padding: 15px; border-radius: 8px; text-align: center;">
                                <div style="font-size: 14px; color: #666;">총 차감 현금</div>
                                <div id="monthlyTotalCash" style="font-size: 20px; font-weight: bold; color: #52c41a;">-</div>
                            </div>
                            <div class="stat-item" style="background: #fff7e6; padding: 15px; border-radius: 8px; text-align: center;">
                                <div style="font-size: 14px; color: #666;">총 차감 포인트</div>
                                <div id="monthlyTotalPoints" style="font-size: 20px; font-weight: bold; color: #fa8c16;">-</div>
                            </div>
                            <div class="stat-item" style="background: #f0f5ff; padding: 15px; border-radius: 8px; text-align: center;">
                                <div style="font-size: 14px; color: #666;">현금 잔액</div>
                                <div id="monthlyCashBalance" style="font-size: 20px; font-weight: bold; color: #722ed1;">-</div>
                            </div>
                            <div class="stat-item" style="background: #fff0f6; padding: 15px; border-radius: 8px; text-align: center;">
                                <div style="font-size: 14px; color: #666;">포인트 잔액</div>
                                <div id="monthlyPointBalance" style="font-size: 20px; font-weight: bold; color: #eb2f96;">-</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 직원별 상세 내역 -->
                    <div class="card">
                        <h4 style="margin-bottom: 15px;">👥 직원별 상세 내역</h4>
                        <div style="max-height: 500px; overflow-y: auto; border: 1px solid #e0e0e0; border-radius: 8px;">
                            <table id="monthlyReportTable" style="width: 100%; border-collapse: collapse;">
                                <thead style="background: #f8f9fa; position: sticky; top: 0;">
                                    <tr>
                                        <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: left;">거래처명</th>
                                        <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: left;">직원명</th>
                                        <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: center;">사용 횟수</th>
                                        <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: right;">차감 현금</th>
                                        <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: right;">차감 포인트</th>
                                        <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: right;">현금 잔액</th>
                                        <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: right;">포인트 잔액</th>
                                        <th style="border: 1px solid #e0e0e0; padding: 12px; text-align: center;">상세보기</th>
                                    </tr>
                                </thead>
                                <tbody id="monthlyReportBody">
                                    <tr>
                                        <td colspan="8" style="text-align: center; padding: 20px; border: 1px solid #e0e0e0;">
                                            조회 버튼을 클릭하여 월간보고서를 확인하세요.
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Developer Section -->
            <div id="developerSection" class="content-section">
                <div class="section-header">
                    <span class="icon">👨‍💻</span>
                    <h2>개발자 정보</h2>
                </div>
                
                <div class="card" style="margin-bottom: 20px;">
                    <h3 style="margin-bottom: 15px; color: #dc3545;">🔒 개발자 전용 메뉴</h3>
                    <p style="margin-bottom: 20px; color: #666;">이 섹션은 시스템 개발자만 접근할 수 있습니다.</p>
                    
                    <!-- 시스템 정보 -->
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                        <h4 style="margin-bottom: 15px; color: #495057;">📋 시스템 정보</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div>
                                <strong>시스템 버전:</strong> v2.0.0<br>
                                <strong>빌드 날짜:</strong> <span id="buildDate">2025-01-27</span><br>
                                <strong>개발자:</strong> nusome<br>
                            </div>
                            <div>
                                <strong>브라우저:</strong> <span id="browserInfo">로딩 중...</span><br>
                                <strong>화면 해상도:</strong> <span id="screenRes">로딩 중...</span><br>
                                <strong>사용자 에이전트:</strong> <span id="userAgent" style="font-size: 12px;">로딩 중...</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 개발자 도구 -->
                    <div style="background: #fff3cd; padding: 20px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #ffc107;">
                        <h4 style="margin-bottom: 15px; color: #856404;">🛠️ 개발자 도구</h4>
                        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                            <button onclick="clearAllLocalStorage()" class="btn" style="background: #ffc107; color: #212529;">🗑️ 로컬스토리지 클리어</button>
                            <button onclick="exportSystemLogs()" class="btn" style="background: #17a2b8; color: white;">📄 시스템 로그 내보내기</button>
                            <button onclick="showDebugInfo()" class="btn" style="background: #6c757d; color: white;">🐛 디버그 정보</button>
                            <button onclick="testAllAPIs()" class="btn" style="background: #28a745; color: white;">🔍 전체 API 테스트</button>
                        </div>
                    </div>
                    
                    <!-- 데이터베이스 정보 -->
                    <div style="background: #f8d7da; padding: 20px; border-radius: 8px; border-left: 4px solid #dc3545;">
                        <h4 style="margin-bottom: 15px; color: #721c24;">💾 데이터베이스 정보</h4>
                        <div id="dbInfo" style="font-family: monospace; background: #000; color: #00ff00; padding: 15px; border-radius: 4px;">
                            연결 상태를 확인 중...
                        </div>
                        <button onclick="checkDatabaseStatus()" class="btn" style="background: #dc3545; color: white; margin-top: 10px;">🔄 DB 상태 새로고침</button>
                    </div>
                </div>
                
                <!-- 사업자 설정 -->
                <div class="card">
                    <h3>🏢 사업자 설정</h3>
                    <div style="margin-bottom: 15px;">
                        <label for="businessNumber">사업자등록번호 (10자리):</label>
                        <input type="text" id="businessNumber" maxlength="10" pattern="[0-9]{10}" 
                               placeholder="1234567890" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;" 
                               oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 10)">
                        <small style="color: #666; display: block; margin-top: 5px;">
                            숫자 10자리만 입력하세요. 쿠폰 코드에 사용됩니다.
                        </small>
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <label for="companyName">회사명:</label>
                        <input type="text" id="companyName" placeholder="회사명을 입력하세요" 
                               style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <label for="representativeName">대표자명:</label>
                        <input type="text" id="representativeName" placeholder="대표자명을 입력하세요" 
                               style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <label for="businessPhone">전화번호:</label>
                        <input type="text" id="businessPhone" placeholder="02-1234-5678" 
                               style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <label for="businessAddress">주소:</label>
                        <textarea id="businessAddress" placeholder="회사 주소를 입력하세요" 
                                  style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; height: 60px; resize: vertical;"></textarea>
                    </div>
                    
                    <div style="text-align: center; margin-bottom: 15px;">
                        <button onclick="loadBusinessSettings()" class="btn btn-secondary">🔄 설정 불러오기</button>
                        <button onclick="saveBusinessSettings()" class="btn btn-success">💾 설정 저장</button>
                    </div>
                    
                    <div style="background: #f0f8ff; padding: 15px; border-radius: 8px; border-left: 4px solid #4299e1;">
                        <h4 style="margin: 0 0 10px 0; color: #2c5aa0;">💡 사업자등록번호 설정 안내</h4>
                        <ul style="margin: 0; padding-left: 20px; color: #2c5aa0; font-size: 14px;">
                            <li style="margin: 5px 0;">사업자등록번호는 쿠폰 코드의 첫 번째 부분에 사용됩니다</li>
                            <li style="margin: 5px 0;">현재: <span id="currentBusinessNumber" style="font-weight: bold; color: #dc3545;">0000000000</span></li>
                            <li style="margin: 5px 0;">쿠폰 코드 예시: <code style="background: #e9ecef; padding: 2px 4px; border-radius: 3px;">1234567890-1111100-0000000005-1-615</code></li>
                        </ul>
                    </div>
                </div>

                <!-- 로그아웃 -->
                <div class="card" style="text-align: center;">
                    <button onclick="developerLogout()" class="btn btn-danger">🚪 개발자 모드 종료</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Developer Login Modal -->
    <div id="developerLoginModal" class="modal-overlay" style="display: none;">
        <div class="modal-content" style="max-width: 400px;">
            <div class="modal-header">
                <h3>👨‍💻 개발자 인증</h3>
                <button onclick="closeDeveloperLoginModal()" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div style="text-align: center; margin-bottom: 20px;">
                    <p style="color: #dc3545; font-weight: bold;">⚠️ 개발자 전용 영역입니다</p>
                    <p style="color: #666; font-size: 14px;">이 메뉴는 시스템 개발자만 접근할 수 있습니다.</p>
                </div>
                
                <div class="form-group" style="margin-bottom: 15px;">
                    <label for="devUserId">개발자 ID:</label>
                    <input type="text" id="devUserId" placeholder="개발자 ID를 입력하세요" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                </div>
                
                <div class="form-group" style="margin-bottom: 20px;">
                    <label for="devPassword">비밀번호:</label>
                    <input type="password" id="devPassword" placeholder="비밀번호를 입력하세요" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">
                </div>
                
                <div style="text-align: center;">
                    <button onclick="authenticateDeveloper()" class="btn" style="background: #dc3545; color: white; padding: 12px 30px;">🔐 인증</button>
                    <button onclick="closeDeveloperLoginModal()" class="btn" style="background: #6c757d; color: white; padding: 12px 30px; margin-left: 10px;">취소</button>
                </div>
                
                <div id="devAuthResult" style="margin-top: 15px; text-align: center;"></div>
            </div>
        </div>
    </div>

    <!-- Corporate Detail Modal -->
    <div id="corporateDetailModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 10px; width: 80%; max-width: 800px; max-height: 90vh; overflow-y: auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h3 id="detailModalTitle">거래처 상세 통계</h3>
                <span onclick="closeCorporateDetailModal()" style="font-size: 24px; cursor: pointer; color: #999;">&times;</span>
            </div>
            <div id="detailModalContent">
                <!-- 동적으로 내용이 추가됨 -->
            </div>
        </div>
    </div>

    <!-- Employee Modal -->
    <div id="employeeModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 10px; width: 90%; max-width: 500px; max-height: 90vh; overflow-y: auto;">
            <h3 id="employeeModalTitle">새 직원 추가</h3>
            <form id="employeeForm" onsubmit="submitEmployeeForm(event)">
                <input type="hidden" id="employeeId" value="">
                <input type="hidden" id="employeeCorporateId" value="">
                
                <div class="form-group">
                    <label for="employeeCorporateName">소속 거래처</label>
                    <input type="text" id="employeeCorporateName" readonly style="background: #f0f0f0;">
                </div>
                
                <div class="form-group">
                    <label for="employeeName">이름 *</label>
                    <input type="text" id="employeeName" required>
                </div>
                
                <div class="form-group">
                    <label for="employeePhone">핸드폰 번호 *</label>
                    <input type="text" id="employeePhone" placeholder="010-0000-0000" required>
                </div>
                
                <div class="form-group">
                    <label for="employeeEmail">이메일</label>
                    <input type="email" id="employeeEmail" placeholder="employee@example.com">
                </div>
                
                <div class="form-group">
                    <label for="employeeDepartment">부서</label>
                    <input type="text" id="employeeDepartment" placeholder="예: 개발팀, 영업팀">
                </div>
                
                <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">
                    <button type="button" onclick="closeEmployeeModal()" class="btn btn-secondary">취소</button>
                    <button type="submit" class="btn btn-success">저장</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Excel Data Bulk Import Modal -->
    <div id="bulkImportModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 10px; width: 90%; max-width: 800px; max-height: 90vh; overflow-y: auto;">
            <h3 style="margin-bottom: 20px;">📊 Excel 데이터 일괄 등록</h3>
            
            <!-- 사용법 안내 -->
            <div style="background: #f0f8ff; padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #4299e1;">
                <h4 style="margin: 0 0 10px 0; color: #2c5aa0;">사용 방법:</h4>
                <p style="margin: 5px 0; font-size: 14px;">1. Excel에서 직원 데이터를 선택하여 복사 (Ctrl+C)</p>
                <p style="margin: 5px 0; font-size: 14px;">2. 아래 텍스트 박스에 붙여넣기 (Ctrl+V)</p>
                <p style="margin: 5px 0; font-size: 14px;">3. '데이터 미리보기' 버튼을 클릭하여 확인</p>
                <p style="margin: 5px 0; font-size: 14px;">4. '일괄 등록' 버튼을 클릭하여 저장</p>
            </div>

            <!-- 데이터 형식 안내 -->
            <div style="background: #fff8dc; padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #f6ad55;">
                <h4 style="margin: 0 0 10px 0; color: #c05621;">데이터 형식 (열 순서):</h4>
                <p style="margin: 5px 0; font-size: 14px; font-family: 'Courier New', monospace;"><strong>이름 | 핸드폰번호* | 이메일 | 부서</strong></p>
                <p style="margin: 5px 0; font-size: 14px; font-family: 'Courier New', monospace;">또는 <strong>핸드폰번호* | 이메일 | 부서</strong></p>
                <p style="margin: 5px 0; font-size: 12px; color: #666;">예1: 김철수	010-1234-5678	kim@company.com	개발팀</p>
                <p style="margin: 5px 0; font-size: 12px; color: #666;">예2: 010-1234-5678	kim@company.com	개발팀</p>
                <p style="margin: 5px 0; font-size: 12px; color: #e53e3e;">* 핸드폰번호만 필수입니다 (이름 생략 가능)</p>
            </div>

            <div class="form-group">
                <label for="bulkDataInput">Excel 데이터 붙여넣기:</label>
                <textarea id="bulkDataInput" 
                    placeholder="Excel에서 복사한 데이터를 여기에 붙여넣으세요..." 
                    style="width: 100%; height: 200px; padding: 12px; border: 2px solid #e0e0e0; border-radius: 8px; font-family: 'Courier New', monospace; font-size: 14px; resize: vertical;">
                </textarea>
            </div>

            <!-- 미리보기 영역 -->
            <div id="dataPreview" style="display: none; margin-top: 20px;">
                <h4 style="color: #667eea; margin-bottom: 10px;">데이터 미리보기:</h4>
                <div id="previewTable" style="max-height: 300px; overflow-y: auto; border: 1px solid #e0e0e0; border-radius: 8px;">
                </div>
                <div id="previewSummary" style="margin-top: 10px; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                </div>
            </div>

            <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">
                <button type="button" onclick="closeBulkImportModal()" class="btn btn-secondary">취소</button>
                <button type="button" onclick="previewBulkData()" class="btn" style="background: #4299e1; color: white;">데이터 미리보기</button>
                <button type="button" onclick="processBulkImport()" class="btn btn-success" id="bulkImportSubmitBtn" disabled>일괄 등록</button>
            </div>
        </div>
    </div>

    <!-- Corporate Modal -->
    <div id="corporateModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 10px; width: 90%; max-width: 500px; max-height: 90vh; overflow-y: auto;">
            <h3 id="modalTitle">새 거래처 추가</h3>
            <form id="corporateForm" onsubmit="submitCorporateForm(event)">
                <input type="hidden" id="corporateId" value="">
                
                <div class="form-group">
                    <label for="corporateName">회사명 *</label>
                    <input type="text" id="corporateName" required>
                </div>
                
                <div class="form-group">
                    <label for="businessNumber">사업자등록번호</label>
                    <input type="text" id="businessNumber" placeholder="0000000000 (10자리)">
                </div>
                
                <div class="form-group">
                    <label for="representative">대표자명</label>
                    <input type="text" id="representative">
                </div>
                
                <div class="form-group">
                    <label for="phone">연락처</label>
                    <input type="text" id="phone" placeholder="02-0000-0000">
                </div>
                
                <div class="form-group">
                    <label for="email">이메일</label>
                    <input type="email" id="email" placeholder="company@example.com">
                </div>
                
                <div class="form-group">
                    <label for="address">주소</label>
                    <input type="text" id="address" placeholder="서울특별시 강남구...">
                </div>
                
                <div style="text-align: right; margin-top: 30px;">
                    <button type="button" onclick="closeCorporateModal()" class="btn btn-danger">취소</button>
                    <button type="submit" class="btn btn-success" style="margin-left: 10px;">저장</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Coupon Edit Modal -->
    <div id="couponEditModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 10px; width: 90%; max-width: 600px; max-height: 90vh; overflow-y: auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h3>✏️ 쿠폰 정보 수정</h3>
                <button class="close-btn" onclick="closeCouponEditModal()">×</button>
            </div>
            
            <form id="couponEditForm" onsubmit="submitCouponEdit(event)">
                <input type="hidden" id="editCouponId" value="">
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div class="form-group">
                        <label>쿠폰 코드</label>
                        <input type="text" id="editCouponCode" readonly style="background: #f5f5f5;">
                    </div>
                    <div class="form-group">
                        <label>직원명</label>
                        <input type="text" id="editEmployeeName" readonly style="background: #f5f5f5;">
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div class="form-group">
                        <label for="editCashBalance">현금 잔고 (원)</label>
                        <input type="number" id="editCashBalance" min="0" step="100">
                    </div>
                    <div class="form-group">
                        <label for="editPointBalance">포인트 잔고</label>
                        <input type="number" id="editPointBalance" min="0" step="10">
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div class="form-group">
                        <label for="editCouponStatus">상태</label>
                        <select id="editCouponStatus">
                            <option value="ACTIVE">사용 가능</option>
                            <option value="SUSPENDED">일시 중지</option>
                            <option value="TERMINATED">해지됨</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editExpireDate">만료일</label>
                        <input type="date" id="editExpireDate">
                    </div>
                </div>
                
                <div class="form-group" style="margin-bottom: 20px;">
                    <label for="editAvailableDays">사용 가능 요일</label>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <label style="display: flex; align-items: center; font-weight: normal;">
                            <input type="checkbox" class="edit-available-day" value="sun"> 일
                        </label>
                        <label style="display: flex; align-items: center; font-weight: normal;">
                            <input type="checkbox" class="edit-available-day" value="mon"> 월
                        </label>
                        <label style="display: flex; align-items: center; font-weight: normal;">
                            <input type="checkbox" class="edit-available-day" value="tue"> 화
                        </label>
                        <label style="display: flex; align-items: center; font-weight: normal;">
                            <input type="checkbox" class="edit-available-day" value="wed"> 수
                        </label>
                        <label style="display: flex; align-items: center; font-weight: normal;">
                            <input type="checkbox" class="edit-available-day" value="thu"> 목
                        </label>
                        <label style="display: flex; align-items: center; font-weight: normal;">
                            <input type="checkbox" class="edit-available-day" value="fri"> 금
                        </label>
                        <label style="display: flex; align-items: center; font-weight: normal;">
                            <input type="checkbox" class="edit-available-day" value="sat"> 토
                        </label>
                    </div>
                </div>
                
                <div style="text-align: right; margin-top: 30px;">
                    <button type="button" onclick="closeCouponEditModal()" class="btn btn-secondary">취소</button>
                    <button type="submit" class="btn btn-success" style="margin-left: 10px;">💾 저장</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Coupon Delete Confirmation Modal -->
    <div id="couponDeleteModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 10px; width: 90%; max-width: 500px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h3 style="color: #e53e3e;">🗑️ 쿠폰 삭제 확인</h3>
                <button class="close-btn" onclick="closeCouponDeleteModal()">×</button>
            </div>
            
            <div style="margin-bottom: 25px;">
                <div style="background: #fee; padding: 15px; border-radius: 8px; border-left: 4px solid #e53e3e; margin-bottom: 20px;">
                    <strong>⚠️ 경고:</strong> 이 작업은 되돌릴 수 없습니다.
                </div>
                
                <p style="margin-bottom: 15px;">다음 쿠폰을 완전히 삭제하시겠습니까?</p>
                
                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; font-family: monospace;">
                    <div><strong>쿠폰 코드:</strong> <span id="deleteCouponCode"></span></div>
                    <div><strong>직원:</strong> <span id="deleteEmployeeName"></span></div>
                    <div><strong>현금 잔고:</strong> <span id="deleteCashBalance"></span>원</div>
                    <div><strong>포인트 잔고:</strong> <span id="deletePointBalance"></span>P</div>
                </div>
            </div>
            
            <div style="text-align: right;">
                <button type="button" onclick="closeCouponDeleteModal()" class="btn btn-secondary">취소</button>
                <button type="button" onclick="confirmCouponDelete()" class="btn btn-danger" style="margin-left: 10px;">🗑️ 삭제</button>
            </div>
        </div>
    </div>

    <!-- Bulk Status Update Modal -->
    <div id="bulkStatusModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 10px; width: 90%; max-width: 500px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h3>🔄 일괄 상태 변경</h3>
                <button class="close-btn" onclick="closeBulkStatusModal()">×</button>
            </div>
            
            <div style="margin-bottom: 20px;">
                <p><strong>선택된 쿠폰:</strong> <span id="selectedCouponCount">0</span>개</p>
                
                <div class="form-group">
                    <label for="bulkNewStatus">변경할 상태:</label>
                    <select id="bulkNewStatus" style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 4px;">
                        <option value="ACTIVE">사용 가능</option>
                        <option value="SUSPENDED">일시 중지</option>
                        <option value="TERMINATED">해지됨</option>
                    </select>
                </div>
            </div>
            
            <div style="text-align: right;">
                <button type="button" onclick="closeBulkStatusModal()" class="btn btn-secondary">취소</button>
                <button type="button" onclick="confirmBulkStatusUpdate()" class="btn btn-success" style="margin-left: 10px;">🔄 일괄 변경</button>
            </div>
        </div>
    </div>

    <!-- Bulk Delete Modal -->
    <div id="bulkDeleteModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 10px; width: 90%; max-width: 500px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h3 style="color: #e53e3e;">🗑️ 쿠폰 일괄 삭제 확인</h3>
                <button class="close-btn" onclick="closeBulkDeleteModal()">×</button>
            </div>
            
            <div style="margin-bottom: 25px;">
                <div style="background: #fee; padding: 15px; border-radius: 8px; border-left: 4px solid #e53e3e; margin-bottom: 20px;">
                    <strong>⚠️ 경고:</strong> 이 작업은 되돌릴 수 없습니다.
                </div>
                
                <p style="margin-bottom: 15px;"><strong>선택된 쿠폰 <span id="bulkDeleteCouponCount">0</span>개를 모두 삭제하시겠습니까?</strong></p>
                
                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                    <div>• 모든 선택된 쿠폰이 완전히 삭제됩니다.</div>
                    <div>• 삭제된 쿠폰의 잔액은 복구할 수 없습니다.</div>
                    <div>• 이 작업은 되돌릴 수 없습니다.</div>
                </div>
            </div>
            
            <div style="text-align: right;">
                <button type="button" onclick="closeBulkDeleteModal()" class="btn btn-secondary">취소</button>
                <button type="button" onclick="confirmBulkDelete()" class="btn" style="background: #e53e3e; color: white; margin-left: 10px;">🗑️ 삭제</button>
            </div>
        </div>
    </div>


    <!-- Utility JS Files -->
    <script src="assets/js/utils/formatters.js"></script>
    <script src="assets/js/utils/notifications.js"></script>
    <script src="assets/js/utils/export.js"></script>
    
    <!-- Core JS Files -->
    <script src="assets/js/core/api.js"></script>
    <script src="assets/js/core/auth.js"></script>
    <script src="assets/js/core/navigation.js"></script>
    
    <!-- Module JS Files -->
    <script src="assets/js/modules/corporate.js"></script>
    <script src="assets/js/modules/employee.js"></script>
    <script src="assets/js/modules/system-settings.js"></script>
    <script src="assets/js/modules/coupon-issue.js"></script>
    <script src="assets/js/modules/coupon-manage.js"></script>
    <script src="assets/js/modules/coupon-send.js"></script>
    <script src="assets/js/modules/delivery-history.js"></script>
    <script src="assets/js/modules/email-config.js"></script>
    <script src="assets/js/modules/sms-config.js"></script>
    <script src="assets/js/modules/management-info.js"></script>
    <script src="assets/js/modules/developer.js"></script>
    
    <!-- Application Initialization -->
    <script src="assets/js/core/app.js"></script>
</body>
</html>
